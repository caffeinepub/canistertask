{
  "kind": "build_request",
  "title": "Add complete user profile page with stats, earnings, and task history",
  "projectName": "CanisterTask",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Create a new 'My Profile' page at route /perfil that displays the authenticated user's complete profile with worker statistics, including: user name with icon, star rating with total completed tasks count, city location with 5km radius indicator, skills list (Photo/Delivery/Verification), hourly rate and per-task rate pricing, total earnings with 7% platform fee indication, today's earnings (default ‚Ç¨0.00), completed tasks count with checkmark, pending tasks count with hourglass icon, and recent tasks list showing task name, completion status, payment amount, and relative timestamp (e.g., '2h ago', '1 day')",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "**P√ÅGINA 'MEU PERFIL'** (menu: Home | Tasks | MEU PERFIL | Admin)",
          "**MODELO WORKER:**\nüë§ [Nome User]\n‚≠ê [Rating] ([Total Tasks]) | üìç [Cidade 5km]\nSKILLS: [Foto/Entrega/Verifica√ß√£o]\nüí∞ ‚Ç¨[pre√ßo]/h | ‚Ç¨[pre√ßo]/task\nGAINHOS: ‚Ç¨[total] | HOJE: ‚Ç¨0,00\nTASKS: [completas] ‚úì | [pendentes] ‚è≥\n√öLTIMAS TASKS:\n'Foto loja X' ‚úì ‚Ç¨15 (2h atr√°s)\n'Entrega Y' ‚úì ‚Ç¨20 (1dia)"
        ]
      },
      "acceptanceCriteria": [
        "Profile page displays all worker statistics fetched from backend",
        "Rating is auto-calculated based on completed tasks",
        "Earnings display includes 7% platform fee indication",
        "Recent tasks show with relative timestamps and completion status",
        "Page is accessible only to authenticated users"
      ]
    },
    {
      "id": "REQ-2",
      "text": "Add 'Edit Profile' and 'Stats Analytics' action buttons to the profile page that allow users to modify their profile information and view detailed analytics",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "[Editar Perfil] [Stats Analytics]"
        ]
      },
      "acceptanceCriteria": [
        "Edit Profile button navigates to settings or opens profile edit modal",
        "Stats Analytics button navigates to analytics page or displays detailed stats"
      ]
    },
    {
      "id": "REQ-3",
      "text": "Create public profile URLs at /perfil/[user-id] that display any user's profile information (name, rating, location, skills, pricing, task counts) viewable by all authenticated users and accessible to admin users to view all profiles",
      "target": "both",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "URL: /perfil/[user-id] p√∫blico",
          "Admin v√™ todos perfis"
        ]
      },
      "acceptanceCriteria": [
        "Public profile route accepts user-id parameter",
        "Profile data loads for any valid user ID",
        "Admin users can navigate to and view any user profile",
        "Non-admin users can view profiles of other authenticated users"
      ]
    },
    {
      "id": "REQ-4",
      "text": "Add backend query method to retrieve user profile data including calculated rating from completed tasks, total earnings with 7% platform fee, today's earnings, completed and pending task counts, and recent task history with timestamps",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "Rating auto-calculado tasks completas",
          "Ganhos 7% mostrados"
        ]
      },
      "acceptanceCriteria": [
        "Backend method calculates rating based on completed tasks",
        "Earnings calculations include 7% platform fee tracking",
        "Recent tasks are returned with relative timestamp data",
        "Query method is accessible by authenticated users for their own profile and by admin for any profile"
      ]
    },
    {
      "id": "REQ-5",
      "text": "Update the main navigation menu to include a new 'MEU PERFIL' (My Profile) link between 'Tasks' and 'Admin', resulting in the menu structure: Home | Tasks | MEU PERFIL | Admin",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "**MENU ATUALIZADO**: Home | Tasks | MEU PERFIL | Admin"
        ]
      },
      "acceptanceCriteria": [
        "Navigation menu displays 'MEU PERFIL' link in correct position",
        "Link is visible to all authenticated users",
        "Clicking the link navigates to /perfil route",
        "Menu maintains responsive mobile behavior"
      ]
    },
    {
      "id": "REQ-6",
      "text": "Ensure the admin dashboard displays HCoragem earnings with the active 7% platform fee clearly indicated",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-6"
        ],
        "quotes": [
          "7% FEE ativa. Dashboard ganhos HCoragem."
        ]
      },
      "acceptanceCriteria": [
        "Admin dashboard shows total platform earnings",
        "7% fee is visibly marked as active",
        "Earnings calculations reflect 7% commission rate"
      ]
    }
  ],
  "constraints": [
    "Maintain single-actor backend architecture in backend/main.mo",
    "Do not modify immutable frontend paths: useInternetIdentity.ts, useInternetIdentity.tsx, useActor.ts, main.tsx, components/ui",
    "Use existing authentication and profile hooks from frontend/src/hooks",
    "Preserve Portuguese/English bilingual support using useTranslation hook"
  ],
  "nonGoals": [
    "Implementing profile photo upload functionality",
    "Adding social sharing features to profiles",
    "Creating profile comparison or ranking features",
    "Implementing private messaging between users"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}