import { useState, useEffect } from 'react';

type Language = 'pt' | 'en';

const translations = {
  pt: {
    'auth.initializing': 'A inicializar...',
    'auth.tagline': 'Plataforma soberana de gig economy no ICP',
    'auth.welcome': 'Bem-vindo ao CanisterTask',
    'auth.loginRequired': 'Faça login com Internet Identity para continuar',
    'auth.login': 'Entrar',
    'auth.logout': 'Sair',
    'auth.loggingIn': 'A entrar...',
    'auth.disclaimer': 'Ao entrar, concorda com os nossos Termos de Serviço e Política de Privacidade',
    'age.title': 'Verificação de Idade',
    'age.description': 'Esta plataforma requer que tenha pelo menos 18 anos',
    'age.requirement': 'Ao continuar, confirma que tem 18 anos ou mais e aceita os termos da plataforma',
    'age.confirm': 'Confirmo que tenho 18+ anos',
    'profile.setup': 'Configurar Perfil',
    'profile.setupDesc': 'Complete o seu perfil para começar',
    'profile.name': 'Nome',
    'profile.namePlaceholder': 'O seu nome',
    'profile.workerType': 'Tipo de Trabalhador',
    'profile.humanWorker': 'Trabalhador Humano',
    'profile.aiAgent': 'Agente IA',
    'profile.continue': 'Continuar',
    'profile.gdprConsent': 'Aceito a Política de Privacidade e os Termos de Serviço',
    'profile.myProfile': 'MEU PERFIL',
    'profile.editProfile': 'Editar Perfil',
    'profile.statsAnalytics': 'Stats Analytics',
    'profile.noProfile': 'Perfil não encontrado',
    'profile.noProfileDesc': 'Crie o seu perfil para começar a usar a plataforma',
    'profile.workerProfile': 'Perfil do Trabalhador',
    'profile.publicView': 'Vista pública do perfil',
    'profile.error': 'Erro',
    'profile.errorLoadingProfile': 'Erro ao carregar o perfil',
    'profile.notFound': 'Perfil não encontrado',
    'profile.notFoundDesc': 'Este utilizador não existe ou não tem perfil público',
    'nav.dashboard': 'Dashboard',
    'nav.home': 'Home',
    'nav.analytics': 'Analytics',
    'nav.settings': 'Definições',
    'nav.about': 'Sobre',
    'nav.myProfile': 'MEU PERFIL',
    'dashboard.title': 'Dashboard do Trabalhador',
    'dashboard.subtitle': 'Tarefas disponíveis na sua área',
    'dashboard.noTasks': 'Sem tarefas disponíveis',
    'dashboard.noTasksDesc': 'Não há tarefas disponíveis na sua área neste momento',
    'dashboard.acceptTask': 'Aceitar Tarefa',
    'dashboard.testFree': 'TESTE GRÁTIS',
    'dashboard.testMode': 'Modo Teste',
    'dashboard.testModeDesc': 'Simula aceitação sem fundos reais',
    'dashboard.accepting': 'A aceitar...',
    'dashboard.taskAccepted': 'Tarefa aceite!',
    'dashboard.taskAcceptedDesc': 'A tarefa foi aceite com sucesso',
    'dashboard.error': 'Erro',
    'dashboard.errorAccepting': 'Erro ao aceitar tarefa',
    'analytics.title': 'Analytics',
    'analytics.subtitle': 'Visualize a densidade de tarefas',
    'analytics.activeTasks': 'Tarefas Ativas',
    'analytics.completedTasks': 'Tarefas Completas',
    'analytics.earningsHeat': 'Mapa de Ganhos',
    'settings.title': 'Definições',
    'settings.subtitle': 'Gerir as suas preferências',
    'settings.notifications': 'Notificações',
    'settings.notificationsDesc': 'Gerir preferências de notificações',
    'settings.browserNotifications': 'Notificações do Navegador',
    'settings.browserNotificationsDesc': 'Receber notificações de novas tarefas',
    'settings.notificationsEnabled': 'Notificações ativadas',
    'settings.notificationsDisabled': 'Notificações desativadas',
    'settings.enableNotifications': 'Ativar Notificações',
    'settings.notificationsDenied': 'Notificações bloqueadas',
    'settings.notificationsDeniedDesc': 'Ative as notificações nas definições do navegador',
    'settings.autoRefresh': 'Atualização Automática',
    'settings.autoRefreshDesc': 'Atualizar automaticamente o dashboard',
    'about.title': 'Sobre o CanisterTask',
    'about.subtitle': 'Plataforma soberana de gig economy',
    'admin.dashboard': 'Dashboard Admin',
    'admin.dashboardDesc': 'Estatísticas e métricas da plataforma',
    'admin.refresh': 'Atualizar',
    'admin.accessDenied': 'Acesso Negado',
    'admin.accessDeniedDesc': 'Apenas administradores podem aceder a esta página',
    'admin.errorLoading': 'Erro ao carregar',
    'admin.errorLoadingDesc': 'Ocorreu um erro ao carregar as estatísticas',
    'admin.totalTasks': 'Total de Tarefas',
    'admin.tasksCreated': 'Tarefas criadas',
    'admin.completedTasks': 'Tarefas Completas',
    'admin.tasksCompleted': 'Tarefas completadas',
    'admin.inProgressTasks': 'Tarefas em Progresso',
    'admin.activeTasks': 'Tarefas ativas',
    'admin.totalRevenue': 'Receita Total',
    'admin.totalRevenueDesc': 'Receita total de todas as tarefas',
    'admin.activeWorkers': 'Workers Ativos',
    'admin.activeWorkersDesc': 'Número de workers registados',
    'admin.dailyEarnings': 'Ganhos Diários',
    'admin.dailyEarningsDesc': 'Histórico de ganhos por dia',
    'admin.fromDate': 'Data Inicial',
    'admin.toDate': 'Data Final',
    'admin.date': 'Data',
    'admin.platformFees': 'Taxas da Plataforma',
    'admin.noDataForRange': 'Sem dados para o período selecionado',
    'admin.hcoragemEarnings': 'Ganhos HCoragem',
    'admin.totalFees': 'Total de taxas (7%)',
    'admin.platformFee': 'Taxa da Plataforma',
    'admin.feeActive': 'Taxa Ativa: 7%',
    'admin.totalPlatformEarnings': 'Ganhos Totais da Plataforma',
    'notifications.title': 'Notificações',
    'notifications.subtitle': 'Todas as suas notificações',
    'notifications.markAllRead': 'Marcar todas como lidas',
    'notifications.markRead': 'Marcar como lida',
    'notifications.noNotifications': 'Sem notificações',
    'notifications.noNotificationsDesc': 'Não tem notificações neste momento',
    'notifications.unread': 'Não lida',
    'notifications.read': 'Lida',
  },
  en: {
    'auth.initializing': 'Initializing...',
    'auth.tagline': 'Sovereign gig economy platform on ICP',
    'auth.welcome': 'Welcome to CanisterTask',
    'auth.loginRequired': 'Login with Internet Identity to continue',
    'auth.login': 'Login',
    'auth.logout': 'Logout',
    'auth.loggingIn': 'Logging in...',
    'auth.disclaimer': 'By logging in, you agree to our Terms of Service and Privacy Policy',
    'age.title': 'Age Verification',
    'age.description': 'This platform requires you to be at least 18 years old',
    'age.requirement': 'By continuing, you confirm that you are 18 years or older and accept the platform terms',
    'age.confirm': 'I confirm I am 18+ years old',
    'profile.setup': 'Profile Setup',
    'profile.setupDesc': 'Complete your profile to get started',
    'profile.name': 'Name',
    'profile.namePlaceholder': 'Your name',
    'profile.workerType': 'Worker Type',
    'profile.humanWorker': 'Human Worker',
    'profile.aiAgent': 'AI Agent',
    'profile.continue': 'Continue',
    'profile.gdprConsent': 'I accept the Privacy Policy and Terms of Service',
    'profile.myProfile': 'MY PROFILE',
    'profile.editProfile': 'Edit Profile',
    'profile.statsAnalytics': 'Stats Analytics',
    'profile.noProfile': 'Profile not found',
    'profile.noProfileDesc': 'Create your profile to start using the platform',
    'profile.workerProfile': 'Worker Profile',
    'profile.publicView': 'Public profile view',
    'profile.error': 'Error',
    'profile.errorLoadingProfile': 'Error loading profile',
    'profile.notFound': 'Profile not found',
    'profile.notFoundDesc': 'This user does not exist or has no public profile',
    'nav.dashboard': 'Dashboard',
    'nav.home': 'Home',
    'nav.analytics': 'Analytics',
    'nav.settings': 'Settings',
    'nav.about': 'About',
    'nav.myProfile': 'MY PROFILE',
    'dashboard.title': 'Worker Dashboard',
    'dashboard.subtitle': 'Available tasks in your area',
    'dashboard.noTasks': 'No tasks available',
    'dashboard.noTasksDesc': 'There are no tasks available in your area at this time',
    'dashboard.acceptTask': 'Accept Task',
    'dashboard.testFree': 'FREE TEST',
    'dashboard.testMode': 'Test Mode',
    'dashboard.testModeDesc': 'Simulates acceptance without real funds',
    'dashboard.accepting': 'Accepting...',
    'dashboard.taskAccepted': 'Task accepted!',
    'dashboard.taskAcceptedDesc': 'The task was accepted successfully',
    'dashboard.error': 'Error',
    'dashboard.errorAccepting': 'Error accepting task',
    'analytics.title': 'Analytics',
    'analytics.subtitle': 'Visualize task density',
    'analytics.activeTasks': 'Active Tasks',
    'analytics.completedTasks': 'Completed Tasks',
    'analytics.earningsHeat': 'Earnings Heat',
    'settings.title': 'Settings',
    'settings.subtitle': 'Manage your preferences',
    'settings.notifications': 'Notifications',
    'settings.notificationsDesc': 'Manage notification preferences',
    'settings.browserNotifications': 'Browser Notifications',
    'settings.browserNotificationsDesc': 'Receive notifications for new tasks',
    'settings.notificationsEnabled': 'Notifications enabled',
    'settings.notificationsDisabled': 'Notifications disabled',
    'settings.enableNotifications': 'Enable Notifications',
    'settings.notificationsDenied': 'Notifications blocked',
    'settings.notificationsDeniedDesc': 'Enable notifications in your browser settings',
    'settings.autoRefresh': 'Auto Refresh',
    'settings.autoRefreshDesc': 'Automatically refresh dashboard',
    'about.title': 'About CanisterTask',
    'about.subtitle': 'Sovereign gig economy platform',
    'admin.dashboard': 'Admin Dashboard',
    'admin.dashboardDesc': 'Platform statistics and metrics',
    'admin.refresh': 'Refresh',
    'admin.accessDenied': 'Access Denied',
    'admin.accessDeniedDesc': 'Only administrators can access this page',
    'admin.errorLoading': 'Error loading',
    'admin.errorLoadingDesc': 'An error occurred while loading statistics',
    'admin.totalTasks': 'Total Tasks',
    'admin.tasksCreated': 'Tasks created',
    'admin.completedTasks': 'Completed Tasks',
    'admin.tasksCompleted': 'Tasks completed',
    'admin.inProgressTasks': 'Tasks in Progress',
    'admin.activeTasks': 'Active tasks',
    'admin.totalRevenue': 'Total Revenue',
    'admin.totalRevenueDesc': 'Total revenue from all tasks',
    'admin.activeWorkers': 'Active Workers',
    'admin.activeWorkersDesc': 'Number of registered workers',
    'admin.dailyEarnings': 'Daily Earnings',
    'admin.dailyEarningsDesc': 'Earnings history by day',
    'admin.fromDate': 'From Date',
    'admin.toDate': 'To Date',
    'admin.date': 'Date',
    'admin.platformFees': 'Platform Fees',
    'admin.noDataForRange': 'No data for selected range',
    'admin.hcoragemEarnings': 'HCoragem Earnings',
    'admin.totalFees': 'Total fees (7%)',
    'admin.platformFee': 'Platform Fee',
    'admin.feeActive': 'Active Fee: 7%',
    'admin.totalPlatformEarnings': 'Total Platform Earnings',
    'notifications.title': 'Notifications',
    'notifications.subtitle': 'All your notifications',
    'notifications.markAllRead': 'Mark all as read',
    'notifications.markRead': 'Mark as read',
    'notifications.noNotifications': 'No notifications',
    'notifications.noNotificationsDesc': 'You have no notifications at this time',
    'notifications.unread': 'Unread',
    'notifications.read': 'Read',
  },
};

export function useTranslation() {
  const [language, setLanguageState] = useState<Language>(() => {
    const stored = localStorage.getItem('language');
    return (stored === 'pt' || stored === 'en') ? stored : 'pt';
  });

  useEffect(() => {
    localStorage.setItem('language', language);
  }, [language]);

  const t = (key: string): string => {
    return translations[language][key as keyof typeof translations['pt']] || key;
  };

  const setLanguage = (lang: Language) => {
    setLanguageState(lang);
  };

  return { language, setLanguage, t };
}
