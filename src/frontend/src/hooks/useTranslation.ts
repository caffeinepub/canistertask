import { useState, useEffect } from 'react';

type Language = 'pt' | 'en';

const translations = {
  pt: {
    'auth.initializing': 'A inicializar...',
    'auth.tagline': 'Plataforma soberana de gig economy no ICP',
    'auth.welcome': 'Bem-vindo ao CanisterTask',
    'auth.loginRequired': 'Faça login com Internet Identity para continuar',
    'auth.login': 'Entrar',
    'auth.logout': 'Sair',
    'auth.loggingIn': 'A entrar...',
    'auth.disclaimer': 'Ao entrar, concorda com os nossos Termos de Serviço e Política de Privacidade',
    'age.title': 'Verificação de Idade',
    'age.description': 'Esta plataforma requer que tenha pelo menos 18 anos',
    'age.requirement': 'Ao continuar, confirma que tem 18 anos ou mais e aceita os termos da plataforma.',
    'age.confirm': 'Confirmo que tenho 18+ anos',
    'profile.setup.title': 'Configure o seu perfil',
    'profile.setup.description': 'Escolha o tipo de perfil para começar',
    'profile.type.humanWorker': 'Trabalhador Humano',
    'profile.type.humanWorkerDesc': 'Execute tarefas e ganhe recompensas',
    'profile.type.aiAgent': 'Agente IA / Cliente',
    'profile.type.aiAgentDesc': 'Crie e gira tarefas',
    'profile.name': 'Nome',
    'profile.namePlaceholder': 'O seu nome',
    'profile.agentName': 'Nome do Agente',
    'profile.agentNamePlaceholder': 'Nome do seu agente IA',
    'profile.description': 'Descrição',
    'profile.descriptionPlaceholder': 'Descreva o seu agente ou serviço',
    'profile.skills.label': 'Competências',
    'profile.skills.photography': 'Fotografar locais',
    'profile.skills.delivery': 'Entregas rápidas',
    'profile.skills.verification': 'Verificações presenciais',
    'profile.skills.arCaptures': 'Capturas AR',
    'profile.skills.customPlaceholder': 'Competência personalizada',
    'profile.skills.add': 'Adicionar',
    'profile.location.lat': 'Latitude',
    'profile.location.lon': 'Longitude',
    'profile.location.radius': 'Raio de ação (km)',
    'profile.price': 'Preço por tarefa (€)',
    'profile.saving': 'A guardar...',
    'profile.save': 'Guardar Perfil',
    'gdpr.title': 'Consentimento GDPR',
    'gdpr.consent': 'Aceito o processamento dos meus dados pessoais de acordo com a',
    'gdpr.privacyPolicy': 'Política de Privacidade',
    'gdpr.and': 'e os',
    'gdpr.terms': 'Termos de Serviço',
    'nav.dashboard': 'Dashboard',
    'nav.analytics': 'Análises',
    'nav.settings': 'Definições',
    'nav.about': 'Sobre',
    'footer.tagline': 'Plataforma soberana de gig economy no ICP',
    'footer.shareText': 'Descubra o CanisterTask - Gig economy descentralizada no ICP!',
    'footer.links': 'Links',
    'footer.about': 'Sobre',
    'footer.privacy': 'Privacidade',
    'footer.terms': 'Termos',
    'footer.legal': 'Legal',
    'footer.legalText': 'Plataforma soberana ICP. Não custodiamos fundos. Pagamentos via ramps regulados EU/PT.',
    'footer.builtWith': 'Construído com',
    'footer.using': 'usando',
    'dashboard.title': 'Dashboard do Trabalhador',
    'dashboard.welcome': 'Bem-vindo de volta',
    'dashboard.subtitle': 'Veja as suas tarefas e ganhos',
    'dashboard.noTasks': 'Nenhuma tarefa disponível no momento',
    'dashboard.loading': 'A carregar tarefas...',
    'dashboard.availableTasks': 'Tarefas Disponíveis',
    'analytics.title': 'Análises',
    'analytics.description': 'Veja as suas estatísticas e ganhos',
    'analytics.heatmapDesc': 'Visualize a densidade de tarefas em Évora e Lisboa',
    'analytics.taskHeatmap': 'Mapa de Calor de Tarefas',
    'analytics.taskDensity': 'Densidade de tarefas por região geográfica',
    'analytics.activeTasks': 'Tarefas Ativas',
    'analytics.completedTasks': 'Tarefas Completadas',
    'analytics.earningsHeat': 'Calor de Ganhos',
    'analytics.noTaskData': 'Sem dados de tarefas',
    'analytics.noTaskDataDesc': 'Não há tarefas suficientes para gerar o mapa de calor',
    'analytics.mapLoadError': 'Erro ao carregar o mapa. Tente novamente mais tarde.',
    'settings.title': 'Definições',
    'settings.description': 'Gerir a sua conta e preferências',
    'settings.preferences': 'Preferências',
    'settings.preferencesDesc': 'Personalize a sua experiência',
    'settings.autoRefresh': 'Atualização automática',
    'settings.autoRefreshDesc': 'Atualizar dados automaticamente',
    'about.title': 'Sobre o CanisterTask',
    'about.creator': 'Criado por Hermínio Coragem (HCoragem) de Évora, Portugal',
    'privacy.title': 'Política de Privacidade',
    'terms.title': 'Termos de Serviço',
    'payment.success': 'Pagamento bem-sucedido!',
    'payment.failure': 'Pagamento falhou',
    'notifications.title': 'Notificações',
    'notifications.description': 'Veja todas as suas notificações',
    'notifications.newTask': 'Nova Tarefa Disponível',
    'notifications.markAsRead': 'Marcar como lida',
    'notifications.markAllAsRead': 'Marcar todas como lidas',
    'notifications.noUnread': 'Sem notificações não lidas',
    'notifications.noNotifications': 'Sem notificações',
    'notifications.noNotificationsDesc': 'Você será notificado quando novas tarefas estiverem disponíveis',
    'notifications.viewAll': 'Ver todas',
    'notifications.unread': 'Não lida',
    'notifications.settings': 'Notificações',
    'notifications.settingsDesc': 'Gerir preferências de notificações',
    'notifications.enableButton': 'Ativar Notificações',
    'notifications.enableDesc': 'Receba notificações quando novas tarefas estiverem disponíveis',
    'notifications.enabled': 'Notificações Ativadas',
    'notifications.enabledDesc': 'Você receberá notificações de novas tarefas',
    'notifications.permissionDenied': 'Permissão Negada',
    'notifications.permissionDeniedDesc': 'Ative as notificações nas configurações do navegador',
    'notifications.notSupported': 'Não Suportado',
    'notifications.notSupportedDesc': 'Seu navegador não suporta notificações',
    'notifications.justNow': 'Agora',
    'notifications.minsAgo': 'm atrás',
    'notifications.hoursAgo': 'h atrás',
    'notifications.daysAgo': 'd atrás',
    'notifications.newTasksAvailable': 'Novas tarefas disponíveis!',
    'notifications.youHave': 'Você tem',
    'notifications.newTasks': 'novas tarefas',
    'task.status.open': 'Aberta',
    'task.status.inProgress': 'Em Progresso',
    'task.status.completed': 'Completada',
    'task.completed': 'Completada',
    'admin.dashboard': 'Painel Administrativo',
    'admin.dashboardDesc': 'Visão geral das estatísticas da plataforma e ganhos',
    'admin.refresh': 'Atualizar',
    'admin.accessDenied': 'Acesso Negado',
    'admin.accessDeniedDesc': 'Você não tem permissão para acessar o painel administrativo',
    'admin.errorLoading': 'Erro ao carregar estatísticas',
    'admin.errorLoadingDesc': 'Não foi possível carregar os dados do painel',
    'admin.hcoragemEarnings': 'Ganhos HCoragem (7%)',
    'admin.totalFees': 'Total acumulado em fees',
    'admin.totalTasks': 'Total de Tasks',
    'admin.tasksCreated': 'Tasks criadas na plataforma',
    'admin.completedTasks': 'Tasks Completadas',
    'admin.tasksCompleted': 'Tasks finalizadas com sucesso',
    'admin.inProgressTasks': 'Tasks em Progresso',
    'admin.activeTasks': 'Tasks ativas no momento',
    'admin.totalRevenue': 'Receita Total',
    'admin.totalRevenueDesc': 'Volume total processado pela plataforma',
    'admin.activeWorkers': 'Workers Ativos',
    'admin.activeWorkersDesc': 'Total de workers registrados na plataforma',
    'admin.dailyEarnings': 'Ganhos Diários',
    'admin.dailyEarningsDesc': 'Breakdown de fees da plataforma por dia',
    'admin.fromDate': 'Data Inicial',
    'admin.toDate': 'Data Final',
    'admin.date': 'Data',
    'admin.platformFees': 'Fees da Plataforma (7%)',
    'admin.noDataForRange': 'Sem dados para o período selecionado',
  },
  en: {
    'auth.initializing': 'Initializing...',
    'auth.tagline': 'Sovereign gig economy platform on ICP',
    'auth.welcome': 'Welcome to CanisterTask',
    'auth.loginRequired': 'Login with Internet Identity to continue',
    'auth.login': 'Login',
    'auth.logout': 'Logout',
    'auth.loggingIn': 'Logging in...',
    'auth.disclaimer': 'By logging in, you agree to our Terms of Service and Privacy Policy',
    'age.title': 'Age Verification',
    'age.description': 'This platform requires you to be at least 18 years old',
    'age.requirement': 'By continuing, you confirm that you are 18 years or older and accept the platform terms.',
    'age.confirm': 'I confirm I am 18+ years old',
    'profile.setup.title': 'Set up your profile',
    'profile.setup.description': 'Choose your profile type to get started',
    'profile.type.humanWorker': 'Human Worker',
    'profile.type.humanWorkerDesc': 'Complete tasks and earn rewards',
    'profile.type.aiAgent': 'AI Agent / Client',
    'profile.type.aiAgentDesc': 'Create and manage tasks',
    'profile.name': 'Name',
    'profile.namePlaceholder': 'Your name',
    'profile.agentName': 'Agent Name',
    'profile.agentNamePlaceholder': 'Your AI agent name',
    'profile.description': 'Description',
    'profile.descriptionPlaceholder': 'Describe your agent or service',
    'profile.skills.label': 'Skills',
    'profile.skills.photography': 'Location Photography',
    'profile.skills.delivery': 'Fast Deliveries',
    'profile.skills.verification': 'On-site Verifications',
    'profile.skills.arCaptures': 'AR Captures',
    'profile.skills.customPlaceholder': 'Custom skill',
    'profile.skills.add': 'Add',
    'profile.location.lat': 'Latitude',
    'profile.location.lon': 'Longitude',
    'profile.location.radius': 'Action radius (km)',
    'profile.price': 'Price per task (€)',
    'profile.saving': 'Saving...',
    'profile.save': 'Save Profile',
    'gdpr.title': 'GDPR Consent',
    'gdpr.consent': 'I accept the processing of my personal data according to the',
    'gdpr.privacyPolicy': 'Privacy Policy',
    'gdpr.and': 'and',
    'gdpr.terms': 'Terms of Service',
    'nav.dashboard': 'Dashboard',
    'nav.analytics': 'Analytics',
    'nav.settings': 'Settings',
    'nav.about': 'About',
    'footer.tagline': 'Sovereign gig economy platform on ICP',
    'footer.shareText': 'Discover CanisterTask - Decentralized gig economy on ICP!',
    'footer.links': 'Links',
    'footer.about': 'About',
    'footer.privacy': 'Privacy',
    'footer.terms': 'Terms',
    'footer.legal': 'Legal',
    'footer.legalText': 'Sovereign ICP platform. We do not custody funds. Payments via EU/PT regulated ramps.',
    'footer.builtWith': 'Built with',
    'footer.using': 'using',
    'dashboard.title': 'Worker Dashboard',
    'dashboard.welcome': 'Welcome back',
    'dashboard.subtitle': 'View your tasks and earnings',
    'dashboard.noTasks': 'No tasks available at the moment',
    'dashboard.loading': 'Loading tasks...',
    'dashboard.availableTasks': 'Available Tasks',
    'analytics.title': 'Analytics',
    'analytics.description': 'View your statistics and earnings',
    'analytics.heatmapDesc': 'Visualize task density across Évora and Lisboa',
    'analytics.taskHeatmap': 'Task Heatmap',
    'analytics.taskDensity': 'Task density by geographic region',
    'analytics.activeTasks': 'Active Tasks',
    'analytics.completedTasks': 'Completed Tasks',
    'analytics.earningsHeat': 'Earnings Heat',
    'analytics.noTaskData': 'No task data',
    'analytics.noTaskDataDesc': 'Not enough tasks to generate heatmap',
    'analytics.mapLoadError': 'Error loading map. Please try again later.',
    'settings.title': 'Settings',
    'settings.description': 'Manage your account and preferences',
    'settings.preferences': 'Preferences',
    'settings.preferencesDesc': 'Customize your experience',
    'settings.autoRefresh': 'Auto-refresh',
    'settings.autoRefreshDesc': 'Automatically refresh data',
    'about.title': 'About CanisterTask',
    'about.creator': 'Created by Hermínio Coragem (HCoragem) from Évora, Portugal',
    'privacy.title': 'Privacy Policy',
    'terms.title': 'Terms of Service',
    'payment.success': 'Payment successful!',
    'payment.failure': 'Payment failed',
    'notifications.title': 'Notifications',
    'notifications.description': 'View all your notifications',
    'notifications.newTask': 'New Task Available',
    'notifications.markAsRead': 'Mark as read',
    'notifications.markAllAsRead': 'Mark all as read',
    'notifications.noUnread': 'No unread notifications',
    'notifications.noNotifications': 'No notifications',
    'notifications.noNotificationsDesc': 'You will be notified when new tasks are available',
    'notifications.viewAll': 'View all',
    'notifications.unread': 'Unread',
    'notifications.settings': 'Notifications',
    'notifications.settingsDesc': 'Manage notification preferences',
    'notifications.enableButton': 'Enable Notifications',
    'notifications.enableDesc': 'Get notified when new tasks are available',
    'notifications.enabled': 'Notifications Enabled',
    'notifications.enabledDesc': 'You will receive notifications for new tasks',
    'notifications.permissionDenied': 'Permission Denied',
    'notifications.permissionDeniedDesc': 'Enable notifications in your browser settings',
    'notifications.notSupported': 'Not Supported',
    'notifications.notSupportedDesc': 'Your browser does not support notifications',
    'notifications.justNow': 'Just now',
    'notifications.minsAgo': 'm ago',
    'notifications.hoursAgo': 'h ago',
    'notifications.daysAgo': 'd ago',
    'notifications.newTasksAvailable': 'New tasks available!',
    'notifications.youHave': 'You have',
    'notifications.newTasks': 'new tasks',
    'task.status.open': 'Open',
    'task.status.inProgress': 'In Progress',
    'task.status.completed': 'Completed',
    'task.completed': 'Completed',
    'admin.dashboard': 'Admin Dashboard',
    'admin.dashboardDesc': 'Platform statistics and earnings overview',
    'admin.refresh': 'Refresh',
    'admin.accessDenied': 'Access Denied',
    'admin.accessDeniedDesc': 'You do not have permission to access the admin dashboard',
    'admin.errorLoading': 'Error loading statistics',
    'admin.errorLoadingDesc': 'Could not load dashboard data',
    'admin.hcoragemEarnings': 'HCoragem Earnings (7%)',
    'admin.totalFees': 'Total accumulated fees',
    'admin.totalTasks': 'Total Tasks',
    'admin.tasksCreated': 'Tasks created on platform',
    'admin.completedTasks': 'Completed Tasks',
    'admin.tasksCompleted': 'Successfully completed tasks',
    'admin.inProgressTasks': 'Tasks in Progress',
    'admin.activeTasks': 'Currently active tasks',
    'admin.totalRevenue': 'Total Revenue',
    'admin.totalRevenueDesc': 'Total volume processed by platform',
    'admin.activeWorkers': 'Active Workers',
    'admin.activeWorkersDesc': 'Total workers registered on platform',
    'admin.dailyEarnings': 'Daily Earnings',
    'admin.dailyEarningsDesc': 'Platform fee breakdown by day',
    'admin.fromDate': 'From Date',
    'admin.toDate': 'To Date',
    'admin.date': 'Date',
    'admin.platformFees': 'Platform Fees (7%)',
    'admin.noDataForRange': 'No data for selected date range',
  },
};

export function useTranslation() {
  const [language, setLanguageState] = useState<Language>(() => {
    const saved = localStorage.getItem('language');
    if (saved === 'pt' || saved === 'en') return saved;
    return navigator.language.startsWith('pt') ? 'pt' : 'en';
  });

  useEffect(() => {
    localStorage.setItem('language', language);
  }, [language]);

  const t = (key: string): string => {
    return translations[language][key as keyof typeof translations.pt] || key;
  };

  return { language, setLanguage: setLanguageState, t };
}
